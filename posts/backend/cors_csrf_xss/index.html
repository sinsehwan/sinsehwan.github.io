<!DOCTYPE html>
<html lang="ko-kr"
  dir="ltr">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">








    






<link rel="icon" type="image/ico" href="https://sinsehwan.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sinsehwan.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sinsehwan.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://sinsehwan.github.io/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://sinsehwan.github.io/apple-touch-icon.png">

<meta name="description" content="배포 시 고려해야 하는 문제 알아보기(CORS, CSRF, XSS) - backend"/>


<meta name="fediverse:creator" content="@username@instance.url">


<title>
    
    CORS, CSRF, XSS | Sehwan&#39;s Dev Retrospect
    
</title>

<link rel="canonical" href="https://sinsehwan.github.io/posts/backend/cors_csrf_xss/"/>

<meta property="og:url" content="https://sinsehwan.github.io/posts/backend/cors_csrf_xss/">
  <meta property="og:site_name" content="Sehwan&#39;s Dev Retrospect">
  <meta property="og:title" content="CORS, CSRF, XSS">
  <meta property="og:description" content="배포 시 고려해야 하는 문제 알아보기(CORS, CSRF, XSS) - backend">
  <meta property="og:locale" content="ko_kr">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-11-20T00:00:00+00:00">
    <meta property="article:tag" content="Backend">
    <meta property="article:tag" content="Java">












<link rel="stylesheet" href="/assets/combined.min.fc5a44152c30c21bef13cba5205c8eddd1f54213723dfec49cb38631ef05a293.css" media="all">




      <script async src="https://www.googletagmanager.com/gtag/js?id=G-xxxxxxxxx"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-xxxxxxxxx');
        }
      </script>











    




</head>







<body class="dark">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="https://sinsehwan.github.io/">Sehwan&#39;s Dev Retrospect</a>
    </h1>

    <div class="header-menu">
        

        
        

        <p
            class="small ">
            <a href="/" >
                /home
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/posts" >
                /posts
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/tags/" >
                /tags
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/about" >
                /about
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      




<div class="breadcrumbs"><a href="/">Home</a><span class="breadcrumbs-separator">/</span><a href="/posts/">Posts</a><span class="breadcrumbs-separator">/</span>
        <a href="/posts/backend/cors_csrf_xss/">CORS, CSRF, XSS</a></div>


<div  class="autonumber" >
  <article>
    <header class="single-intro-container">
        
        <h1 class="single-title">CORS, CSRF, XSS</h1>
        <p class="single-summary">배포 시 고려해야 하는 문제 알아보기(CORS, CSRF, XSS)</p>
        
        <div class="single-subsummary">
          
          <div>
            
            <p class="author">Sin SeHwan </p>
            
            <p class="single-date">
              <time datetime="2025-11-20T00:00:00&#43;00:00">November 20, 2025</time>
              &nbsp; · &nbsp;2 min read
            </p>
          </div>
        </div>
        
    </header>    
        <div class="single-tags"><span>
                  <a href="https://sinsehwan.github.io/tags/backend/">#Backend</a>
                </span><span>
                  <a href="https://sinsehwan.github.io/tags/java/">#Java</a>
                </span>
        </div>
      <aside class="toc">
        <p><strong>Table of contents</strong></p>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#sop-same-origin-policy">SOP (Same-Origin Policy)</a></li>
    <li><a href="#cors-cross-origin-resource-sharing---교차-출처-리소스-공유">CORS (Cross-Origin Resource Sharing) - 교차 출처 리소스 공유</a>
      <ul>
        <li><a href="#preflight-request">Preflight Request</a></li>
      </ul>
    </li>
    <li><a href="#csrf-cross-site-request-forgery---사이트-간-요청-위조">CSRF (Cross-Site Request Forgery) - 사이트 간 요청 위조</a>
      <ul>
        <li><a href="#csrf-방어-방법">CSRF 방어 방법</a></li>
      </ul>
    </li>
    <li><a href="#xss-cross-site-scripting---교차-사이트-스크립팅">XSS (Cross-Site Scripting) - 교차 사이트 스크립팅</a>
      <ul>
        <li><a href="#방어-방법">방어 방법</a></li>
      </ul>
    </li>
    <li><a href="#자주-쓰는-쿠키-옵션">자주 쓰는 쿠키 옵션</a></li>
  </ul>
</nav>
      </aside>
    
    <div class="single-content">
      <h1 class="heading" id="ormjpa의-필요성---2">
  ORM(JPA)의 필요성 - 2
  <a class="anchor" href="#ormjpa%ec%9d%98-%ed%95%84%ec%9a%94%ec%84%b1---2">#</a>
</h1>
<h1 class="heading" id="cors-csrf-xss">
  CORS, CSRF, XSS
  <a class="anchor" href="#cors-csrf-xss">#</a>
</h1>
<h2 class="heading" id="sop-same-origin-policy">
  SOP (Same-Origin Policy)
  <a class="anchor" href="#sop-same-origin-policy">#</a>
</h2>
<ul>
<li>웹 브라우저의 기본 보안 정책
<ul>
<li>브라우저를 통해 웹 리소스에 접근할 때 발생합니다.</li>
</ul>
</li>
<li>특정 출처(Origin)에서 불러온 문서나 스크립트가 다른 출처의 리소스와 상호작용하는 것을 제한합니다.</li>
</ul>
<blockquote>
<p>Origin : Protocol(http/https) + Host(domain) + Port
: 세 가지가 모두 같아야 동일 출처입니다.</p></blockquote>
<ul>
<li>
<p><a href="http://google.com">http://google.com</a></p>
</li>
<li>
<p><a href="https://google.com">https://google.com</a></p>
<ul>
<li>다른 출처</li>
</ul>
</li>
<li>
<p>http://localhost:8080</p>
</li>
<li>
<p>http://localhost:3000</p>
<ul>
<li>다른 출처</li>
</ul>
</li>
</ul>
<blockquote>
<p>다른 출처에서 응답을 받는 것을 방지합니다. (Read 방지)</p></blockquote>
<h2 class="heading" id="cors-cross-origin-resource-sharing---교차-출처-리소스-공유">
  CORS (Cross-Origin Resource Sharing) - 교차 출처 리소스 공유
  <a class="anchor" href="#cors-cross-origin-resource-sharing---%ea%b5%90%ec%b0%a8-%ec%b6%9c%ec%b2%98-%eb%a6%ac%ec%86%8c%ec%8a%a4-%ea%b3%b5%ec%9c%a0">#</a>
</h2>
<blockquote>
<p>추가 HTTP 헤더를 사용해서, A 출처의 애플리케이션이 B 출처의 특정 자원에 접근할 수 있는 권한을 부여하도록 브라우저에 알려주는 HTTP 헤더 기반 매커니즘입니다.</p></blockquote>
<ul>
<li>SOP를 적용하지 않을 리소스 지정해줍니다.</li>
</ul>
<h3 class="heading" id="preflight-request">
  Preflight Request
  <a class="anchor" href="#preflight-request">#</a>
</h3>
<p>브라우저는 OPTIONS 메소드를 통해 서버에게 요청을 보내도 되는지 질의한다. 이를 Preflight라고 부릅니다.</p>
<pre tabindex="0"><code>// 브라우저 -&gt; 서버
OPTIONS /api/data HTTP/1.1
Origin: https://client.com
Access-Control-Request-Method: POST
Access-Control-Request-Headers: Content-Type
</code></pre><pre tabindex="0"><code>// 서버 -&gt; 브라우저
HTTP/1.1 204 No Content
Access-Control-Allow-Origin: https://client.com
Access-Control-Allow-Methods: POST
Access-Control-Allow-Headers: Content-Type
</code></pre><p>











<figure class="">

    <div class="img-container" style="--w: 1938; --h: 1519;">
        <img loading="lazy" alt="alt text" src="/posts/backend/cors_csrf_xss/images/preflight.png" width="1938" height="1519">
    </div>

    
</figure>
</p>
<h4 class="heading" id="주요-헤더">
  주요 헤더
  <a class="anchor" href="#%ec%a3%bc%ec%9a%94-%ed%97%a4%eb%8d%94">#</a>
</h4>
<ul>
<li>Access-Control-Allow-Origin
<ul>
<li>어떤 출처의 도메인을 명시할지
<ul>
<li><a href="https://my-web.com">https://my-web.com</a></li>
</ul>
</li>
</ul>
</li>
<li>Access-Control-Allow-Methods
<ul>
<li>허용할 HTTP 메서드 (GET, POST, PUT 등)</li>
</ul>
</li>
<li>Access-Control-Allow-Headers
<ul>
<li>허용할 커스텀 헤더</li>
</ul>
</li>
<li>Access-Control-Allow-Credentials
<ul>
<li>쿠키나 인증 정보를 포함한 요청을 허용할지 여부</li>
</ul>
</li>
</ul>
<h2 class="heading" id="csrf-cross-site-request-forgery---사이트-간-요청-위조">
  CSRF (Cross-Site Request Forgery) - 사이트 간 요청 위조
  <a class="anchor" href="#csrf-cross-site-request-forgery---%ec%82%ac%ec%9d%b4%ed%8a%b8-%ea%b0%84-%ec%9a%94%ec%b2%ad-%ec%9c%84%ec%a1%b0">#</a>
</h2>
<blockquote>
<p>사용자가 공격자에 의해 자신이 의도하지 않은 행위를 특정 웹사이트에 요청하는 공격입니다.</p></blockquote>
<ul>
<li>
<p>브라우저에 세션 쿠키가 저장된 상태를 악용함</p>
</li>
<li>
<p>e.g. 특정 사이트 접속 시 쿠키를 가진 브라우저가 자동으로 은행으로 송금 요청 보냄</p>
</li>
<li>
<p>SOP를 적용하더라도, 악의적인 요청을 보내는 것은 막지 못하기에, CSRF가 필요합니다.</p>
</li>
</ul>
<p>











<figure class="">

    <div class="img-container" style="--w: 2032; --h: 1531;">
        <img loading="lazy" alt="alt text" src="/posts/backend/cors_csrf_xss/images/csrf.png" width="2032" height="1531">
    </div>

    
</figure>
</p>
<ol>
<li>사용자 로그인 (bank.com)</li>
<li>사용자가 공격자가 만든 주소(glgl.com)에 접속 (악성 email 등)</li>
<li>glgl.com에는 bank.com/(나쁜거) 으로 요청을 보내는 숨겨진 스크립트 등이 있음</li>
<li>브라우저는 해당 요청을 쿠키를 포함하여 보냄</li>
<li>bank.com에서는 유효한 쿠키가 존재하므로 그대로 송금</li>
</ol>
<h3 class="heading" id="csrf-방어-방법">
  CSRF 방어 방법
  <a class="anchor" href="#csrf-%eb%b0%a9%ec%96%b4-%eb%b0%a9%eb%b2%95">#</a>
</h3>
<ul>
<li>
<p>CSRF 토큰</p>
<ol>
<li>서버측에서 페이지 내부에 숨겨진 CSRF 토큰을 담아서 보내기</li>
<li>사용자가 요청을 보낼 때 해당 CSRF 토큰이 있는 요청만 허용</li>
</ol>
</li>
<li>
<p>SameSite Cookie 설정</p>
<ul>
<li>쿠키 설정 시(서버단) 외부 사이트에서 요청을 보낼 때 쿠키가 전송되지 않도록 제한 (Strict, Lax 등)</li>
</ul>
</li>
</ul>
<h2 class="heading" id="xss-cross-site-scripting---교차-사이트-스크립팅">
  XSS (Cross-Site Scripting) - 교차 사이트 스크립팅
  <a class="anchor" href="#xss-cross-site-scripting---%ea%b5%90%ec%b0%a8-%ec%82%ac%ec%9d%b4%ed%8a%b8-%ec%8a%a4%ed%81%ac%eb%a6%bd%ed%8c%85">#</a>
</h2>
<p>











<figure class="">

    <div class="img-container" style="--w: 2736; --h: 1504;">
        <img loading="lazy" alt="alt text" src="/posts/backend/cors_csrf_xss/images/xss.png" width="2736" height="1504">
    </div>

    
</figure>
</p>
<h3 class="heading" id="방어-방법">
  방어 방법
  <a class="anchor" href="#%eb%b0%a9%ec%96%b4-%eb%b0%a9%eb%b2%95">#</a>
</h3>
<ul>
<li>입력값 검증</li>
<li>토큰을 쿠키로 담고 httpOnly 옵션 사용
<ul>
<li>해당 경우 CSRF를 막기 위해 Cookie에 SameSite 속성 추가 필요</li>
</ul>
</li>
</ul>
<h2 class="heading" id="자주-쓰는-쿠키-옵션">
  자주 쓰는 쿠키 옵션
  <a class="anchor" href="#%ec%9e%90%ec%a3%bc-%ec%93%b0%eb%8a%94-%ec%bf%a0%ed%82%a4-%ec%98%b5%ec%85%98">#</a>
</h2>
<ul>
<li>HttpOnly: 자바스크립트 접근 불가 (XSS 방어)</li>
<li>SameSite: 타 도메인 전송 불가 (CSRF 방어)</li>
<li>쿠키 Secure 옵션 추가 : HTTPS 프로토콜에서만 전송</li>
</ul>

    </div>
  </article>

  

  

  
  

<div class="single-pagination">
    <hr />

    <div class="flexnowrap">

        <div class="single-pagination-prev">
            
            <div class="single-pagination-container-prev">
                <div class="single-pagination-text">←</div>
                <div class="single-pagination-text">
                    <a href="/posts/backend/db_index/">
                        DB Index 장단점
                    </a>
                </div>
            </div>
            
        </div>

        <div class="single-pagination-next">
            
        </div>

    </div>

    <hr />
</div>



  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  
  





    




  <footer>
    

    
    





    




    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    


  </footer>

  
  <link rel="stylesheet" 
  href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css">
  
<script defer 
  src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script>

<script defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.body);"></script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ]
    });
  });
</script>
  
</body>

<script src="/js/theme-switch.js"></script>
<script defer src="/js/copy-code.js"></script>
</html>
